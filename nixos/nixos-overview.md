# General outline of the NixOS configuration

This file outlines the general structure of the `/etc/nixos/` configuration files. It is not a complete configuration but serves as a guide to understanding how I manage my NixOS setup.

----

The general structure for `nixos/` is as follows:

```
.
├── flake.nix
├── flake.lock
├── README.md
├── hosts/
│   ├── base.nix
│   ├── common.nix
│   ├── deskmeat/
│   │   ├── configuration.nix
│   │   └── hardware-configuration.nix
│   └── old_lenno/
│       ├── configuration.nix
│       └── hardware-configuration.nix
└── overlays/
    └── default.nix
```

And for the home-manager configurations, just separate users into their own directories, for example `./home-manager/allu/home.nix` and `./home-manager/allu-wsl/home.nix` etc.

## Component Explanation

  * **`flake.nix`**: The entry point for the NixOS configurations. Its primary role is to define the `nixpkgs` input and build the `nixosConfigurations` output for each host.
  * **`/hosts`**: This directory isolates all machine-specific configurations.
      * `common.nix`: A file for configuration options that are identical across all machines. This adheres to the "Don't Repeat Yourself" (DRY) principle for universal settings like timezone, default shell, or system-wide Nix settings.
      * `base.nix`: Similar to `common.nix`, but for settings that are very minimally basic, such as some editor preferences, localisation and some basic tools.
      * `hosts/<machine-name>/configuration.nix`: The primary, monolithic configuration file for a specific machine. It imports `./hardware-configuration.nix` and `../../common.nix` and contains the majority of the system's definition, including packages, services, and users.
      * `hosts/<machine-name>/hardware-configuration.nix`: The machine-specific hardware profile generated by NixOS.
  * **`/overlays`** (Optional): This directory is for Nixpkgs overlays, which are used to add custom packages or modify existing ones. The `default.nix` in this directory can be imported into the `flake.nix` and applied to the `nixpkgs` input.

## Setting Up a New Machine

TODO: Write this section