## my minimal tmux conf
## install tpm with 
## git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm

# Plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g @plugin 'tmux-plugins/tmux-open'
set -g @plugin 'christoomey/vim-tmux-navigator' # Vim compatibility
set -g @plugin 'ChanderG/tmux-notify'


# Use emacs/vi keybindings in the status line
set-option -g status-keys vi
# Use some common sense navigation (ctrl+*)
set-window-option -g xterm-keys on

unbind C-BSpace
unbind C-Left
unbind C-Right

# Use vim keybindings in copy mode
setw -g mode-keys vi

# Enable mouse mode
set -g mouse on

# turn clipboard on
set -g set-clipboard on
set -g @yank_selection 'clipboard'
set -g focus-events on

# human indexingbg
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on

# loud or quiet?
set -g visual-activity on
set -g visual-bell off
set -g visual-silence off
setw -g monitor-activity off
set -g bell-action none

# Statusbar
# use i for current info
# set -g status off
set -g status-position top
set -g status-style 'fg=#EEEEEE bg=default'
set -g set-titles-string "tmux: #I #W"
set -g status-justify centre
set -g status-left ' #[fg=green]#H #[default]'
set -g status-right '#{prefix_highlight} #[fg=green] %m/%d/%y ~ %H:%M '

setw -g window-status-format ' #I ~ #W '
setw -g window-status-current-style 'bold'
setw -g window-status-current-format '[#I ~ #W]'
setw -g window-status-bell-style 'fg=red'

# Borders 
set -g pane-active-border-style fg=#151515
set -g pane-active-border-style bg=default
set -g pane-border-style fg=#151515
set -g pane-border-style bg=default

# Bindings
# more intuitive keybindings for splitting
unbind %
bind % split-window -h -c "#{pane_current_path}"
unbind '"'
bind - split-window -v -c "#{pane_current_path}" 

# break pane into a new window
bind ^ break-pane -d

# Copy mode
unbind-key -T copy-mode-vi v

bind-key -T copy-mode-vi v \
  send-keys -X begin-selection

bind-key -T copy-mode-vi 'C-v' \
  send-keys -X rectangle-toggle

bind-key -T copy-mode-vi y \
  send-keys -X copy-pipe-and-cancel "xsel -i"

bind-key -T copy-mode-vi MouseDragEnd1Pane \
  send-keys -X copy-pipe-and-cancel "xsel -i"

# use zsh by default
set-option -g default-shell /usr/bin/zsh
set -g default-terminal "xterm-256color"
# set -g default-terminal "xterm-kitty"
set -as terminal-overrides ",xterm-256color:RGB"
set -as terminal-overrides ",*:Smulx=\E[4::%p1%dm"  # undercurl support
set -as terminal-overrides ",*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m"  # underscore colours - needs tmux-3.0


# WARNING: keep this at the bottom <- init tmux plugin manager TPM
run '~/.tmux/plugins/tpm/tpm'
